<link rel="stylesheet" href="leaflet/leaflet.css">

<script src="leaflet/leaflet.js"></script>

<polymer-element name="leaflet-map" attributes="width height zoom lat lng tiles panelTitle">
  <template>
    <style>:host { display: block; }</style>

    <figure class="panel panel-default">
      <template if="{{ panelTitle }}">
        <h2 class="panel-heading">{{ panelTitle }}</h2>
      </template>

      <div id="map"></div>

      <figcaption class="panel-body">
        <content select="p"></content>
      </figcaption>
    </figure>
  </template>

  <script>
  Polymer('leaflet-map', {
    tiles: 'http://{s}.tile.stamen.com/watercolor/{z}/{x}/{y}.jpg',
    height: '500px',
    width: '100%',
    lat: 51.5,
    lng: 0,
    zoom: 10,
    panelTitle: '',

    ready: function() {
      L.Icon.Default.imagePath = 'path-to-your-leaflet-images-folder';

      this.$.map.style.width = this.width;
      this.$.map.style.height = this.height;

      this.map = L.map(this.$.map).setView([this.lat, this.lng], this.zoom);
      L.tileLayer(this.tiles).addTo(this.map);

      window.dispatchEvent(new Event('resize')); // redraw the map full size now it's visible
    },

    addMarker: function(data) {
      var marker = L.marker([ data.lat, data.lng ]).addTo(this.map);

      if (data.popup) {
        marker.bindPopup(data.popup);
      }

      return marker;
    }
  });
  </script>
</element>